extends layout

block content

    <span ng-init="bitcoin_rate='#{EURBTC.rate}'"</span>
    <span ng-init="euro_rate='#{BTCEUR.rate}'"</span>
    <span ng-init="old_bitcoin_deposit='#{OLD_BTC}'"</span>
    <span ng-init="current_bitcoin_deposit='#{BTC}'"</span>
    <span ng-init="current_euro_deposit='#{EUR}'"</span>
    span Last time: {{ #{current_time_stamp} | date : 'yyyy-M-d H:mm:ss'}}

    <div class="container">
        <div class="row">
            div(class="col s5 z-depth-1") Pardavimo kaina: <span ng-init="selling_price='#{BTCEUR.rate}'" ng-bind="selling_price"></span> &euro; = 1 ₿                
                span Siuo metu turiu: {{current_bitcoin_deposit}} ₿
                if BTCEUR.rate * BTC <= ( (BTCEUR.rate * BTC) + (1 / EURBTC.rate - BTCEUR.rate))
                    div(class="col s-12 red")
                        h5 Dabar neverta perparduoti ₿ uz #{BTCEUR.rate * BTC}
                    div Perpardaves gali tureti :
                        b #{(EURBTC.rate * BTCEUR.rate * BTC)} ₿ 
                        if BTC >= (EURBTC.rate * BTCEUR.rate * BTC)
                            span.red #{BTC - (EURBTC.rate * BTCEUR.rate * BTC)} ₿  mažiau
                        else
                            span.green #{BTC - (EURBTC.rate * BTCEUR.rate * BTC)} ₿ daugiau
                        <span> Jų vertė <b>#{((EURBTC.rate * BTCEUR.rate * BTC) - BTC) * (1 / EURBTC.rate)} &euro;</b></span>
                else
                    div(class="col s-12 green")
                        h5 Dabar verta perparduoti ₿ uz #{BTCEUR.rate * BTC}
                br
                div(class="col s-12 z-depth-1") 
                    <span ng-init="current_balance='#{EUR}'"></span>
                    <div class="input-field">
                      <i class="material-icons prefix">euro_symbol</i>
                      <input id="icon_prefix" ng-model="current_balance" type="text" class="validate">
                      <label for="icon_prefix">Current ballance</label>
                    </div>
                    div Uz <span ng-bind="current_balance"></span> &euro; galima nusipirkti : <b>{{ bitcoin_rate * current_balance}} ₿</b>
                    br



            div(class="col s2 center-align") Skirtumas: 
                b {{(selling_price - buying_price)}} &euro;

                div(class="") Currently in stock
                    <div class="switch center-align">
                        <label>
                            span ₿
                            <input type="checkbox" mg-model="currrent_stock">
                            <span class="lever"></span>
                            span &euro;
                        </label>
                    </div>
                    <span ng-bind="currrent_stock"></span>
                    hr
                    <div class="input-field col s-6" ng-init="bitcoin_counter='0.001'">
                        <i class="material-icons prefix">₿</i>
                        <input id="icon_prefix" ng-model="bitcoin_counter" type="text" class="validate">
                        <label for="icon_prefix">Bitkonu kiekis</label>
                    </div>
                    span Verte: {{ euro_rate * bitcoin_counter }} &euro;
                    hr

            div(class="col s5 z-depth-1 right-align") Pirkimo kaina: <span ng-init="buying_price='#{(1 / EURBTC.rate)}'" ng-bind="buying_price"></span> &euro; =  1 ₿
                span Siuo metu turiu: {{current_euro_deposit}} &euro;
                div(class="row")
                    if OLD_BTC >= (BTCEUR.rate * BTC)
                        div(class="col s-12 red")
                            h5 Dabar neverta pirkti #{(EURBTC.rate * BTCEUR.rate * BTC)} ₿
                    else
                        div(class="col s-12 green")
                            h5 Dabar verta pirkti #{(EURBTC.rate * BTCEUR.rate * BTC)} ₿

                div(class="row z-depth-3")
                    div(class="center-align container") <br>Kad uzdirbtum <b>{{ wage }} &euro;</b> uz <b>{{ current_bitcoin_deposit }} ₿</b> pardavimo kursas turi būti <b>{{ (wage / current_bitcoin_deposit).toFixed(3) }} &euro;</b>
                    <span ng-init="wage='#{EUR+100}'"></span>
                    <div class="input-field col s-6">
                        <i class="material-icons prefix">euro_symbol</i>
                        <input id="icon_prefix" ng-model="wage" type="text" class="validate">
                        <label for="icon_prefix">Planuojamas uzdarbis</label>
                    </div>
                    <div class="input-field col s-6">
                        <i class="material-icons prefix">₿</i>
                        <input id="icon_prefix" ng-model="current_bitcoin_deposit" type="text" class="validate">
                        <label for="icon_prefix">Bitkonu kiekis</label>
                    </div>

                div(class="row z-depth-1")
                    div(class="center-align") Mano turimu ₿ verte &euro; :
                        b #{BTCEUR.rate * BTC} &euro;
                        | &nbsp;siuo metu si suma verta&nbsp;
                        b #{(EURBTC.rate * BTCEUR.rate * BTC)} ₿

                    div(class="center-align") Seniau turejau :
                        b #{OLD_BTC} ₿
                        | &nbsp;prieaugis&nbsp;
                        b {{ current_bitcoin_deposit - old_bitcoin_deposit }}
                        | &nbsp;siuo metu jo verte&nbsp;
                        b {{ (current_bitcoin_deposit - old_bitcoin_deposit) * euro_rate }}
        

        hr
        <input ng-init="new_price='#{BTCEUR.rate * BTC}'" mg-model="new_price" type="hidden"/>
        <span ng-bind="new_price" >TEST</span>



        hr
        div Bitkoinu nuostolis : 
            b #{EURBTC.rate * EUR - BTC} ₿
        div Euru nuostolis : 
            b #{BTCEUR.rate * BTC - EUR} &euro; = #{EURBTC.rate * (BTCEUR.rate * BTC - EUR)} ₿

    </div>

    <div id="container" style="width:100%; height:400px;"></div>
